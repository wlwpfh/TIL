## Stateful Web App: MyWordPress.com  

**만드려는 사이트의 요건**

1. 완전히 확장 가능한 WordPress 웹사이트
2. WordPress에 접근이 가능해야 하며 업로드한 그림이 바르게 나타나길 원한다.
3. 모든 데이터가 MySQL 데이터베이스에 저장되야 하며 글로벌하게 확장하고 싶다.

(현재 이미 기본으로 2번의 마지막의 단계에서 시작한다.)

### 1. RDS Layer

RDS가 있는 계층을 생성하는 것이다.

⇒ 계층을 aurora MySQL로 교체하는 것이다.

이를 통해 다중 AZ, 읽기 전용 복제본, 글로벌 데이터베이스까지 적용할 수 있다.

### 2. Storing images with EBS

이미지 저장에 대해 다뤄보자

하나의 EC2 인스턴스와 하나의 EBS 볼륨이 연결되어 있는 단일 AZ의 단순한 솔루션 아키텍처가 있다.

사용자는 로드 밸런서로 이미지를 보내고 싶어 한다. 그러면 그 이미지는 EBS까지 도달하여 저장된다.

인스턴스를 확장하여 두 개의 인스턴스와 두 개의 AZ가 있다.

인스턴스 각각은 EBS 볼륨을 가지고 있다.

그렇기에 한 EBS에는 사진이 저장되어 있지만 다른 EBS에는 해당 사진이 없다.

### 3. Storing Images with EFS

EFS = 네트워크 파일 시스템 드라이브를 사용하자

EFS는 탄력적 네트워크 인터페이스를 위해 각각의 AZ에 ENI를 생성한다.

해당 ENI는 EFS 드라이브에 접근하는 모든 EC2에 사용할 수 있다.

그리고 스토리지는 모든 인스턴스에게 공유된다!

⇒ 가용 영역이나 인스턴스 숫자와 관계 없이 동일한 파일에 접근하도록 허용하기 위해 다수의 인스턴스에 걸쳐 스토리지를 확장하는 방법이다.