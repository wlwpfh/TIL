## amazon guardduty

이를 사용하면 지능형 위협 탐지를 이용해서 우리의 aws 계정을 지킬 수 있다.

guardduty에는 머신러닝 알고리즘이 있어 이상 탐지를 수행, 서드파티 데이터를 사용해서 위협을 탐지한다.

- input data
1. cloudtrail event logs 같은 많은 입력 데이터를 확인해서 비정상적인 api 호출, 무단 배포를 검색한다.

   관리 이벤트와 데이터 이벤트 검색

2. vpc flow logs - 비정상적인 인터넷 트래픽, ip 주소을 검색한다.
3. dns logs -  dns 쿼리안에서 인코딩된 데이터를 전송하는 ec2 인스턴스를 검색한다.
4. 옵션 기능 - eks 감사 로그, rds & aurora 로그인 이벤트 등..

추가적으로 eventbridge 규칙을 설정해서 발견된 결과가 있으면 자동으로 알림을 받는다.

guradduty는 암호화폐 공격을 방어하기 위한 아주 좋은 도구이다.



## amazon inspector

몇 군데에서 자동화된 보안 평가를 실행할 수 있는 서비스이다.

1. ec2 인스턴스

ec2 인스턴스에서 시스템 관리자 에이전트(SSM)를 활용하면 amazon inspector가 해당 ec2 인스턴스의 보안을 평가하기 시작한다.

의도되지 않은 네트워크 접근 가능성에 대해 분석한다.

실행중인 운영체제에서 알려진 취약점을 분석한다.

1. 컨테이너 이미지를 amazon ECR로 푸시할 때 실행된다.

컨테이너 이미지가 ECR로 푸시되면 amazon inspector가 알려진 취약점에 대해 검사한다.

1. 람다 함수

람다 함수가 배포될 때 함수 코드 및 패키지 종속성에서 소프트웨어 취약성을 다시 분석한다.

amazon inspector가 작업을 완료하면 결과를 aws 보안 허브에 보고한다.

이러한 결과 및 결과 이벤트를 eventbridge로 보낸다.

### amazon inspector가 평가하는 것은?

inspector는 실행중인 ec2 인스턴스, amazon ECR의 컨테이너 이미지, 람다 함수에만 사용된다.

필요할 때 인프라만 지속적으로 스캔한다.

취약성 데이터베이스, CVE를 살펴본다.

→ EC2, ECR, lambda에서 패키지 취약성 및 EC2에서 넨트워크 도달성을 살펴본다.

실행될 때마다 우선 순위를 정하기 위해 위험 점수가 모든 취약성과 다시 연관된다.

## amazon macie

완벽히 관리되는 데이터 보안 및 데이터 프라이버시 서비스이다.

머신러닝과 패턴매칭을 이용해서 aws에 있는 민감한 데이터를 발견하고 보호한다.

⇒ 개인식별정보(PII) 같은 민감정보에 대해 경보를 제공한다.

macie를 사용해서 s3 버킷에 있는 민감정보를 찾아낸다.