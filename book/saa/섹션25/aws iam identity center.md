## aws iam 자격 증명 센터

=  aws single sign-on 서비스의 후속이다.

한번만 로그인하면 되니까 싱글사인온이다.

→ aws 조직

→ 비즈니스 클라우드 애플리케이션

→ saml2.0 통합이 가능한 어떤 애플리케이션이라도

→ ec2 windows 인스턴스

- identitiy 공급자

로그인을 위해 사용자는 두 위치에 저장될 수 있다.

→ iam 자격 증명 센터에 내장된 id 저장소 / 3rd 파티 id 공급자에 연결할 수 있다.

로그인을 했다고 다 접근할 수 있는 것은 아니다.

→ 자격 증명 센터에서 권한 셋을 정의해서 어떤 사용자가 무엇에 액세스할 수 있는지 정의한다.

### 세분화된 권한 및 할당

1. 다중 계정 권한

이 서비스를 사용하면 조직에서 여러 계정에 대한 액세스를 관리할 수 있다.

권한 셋을 사용하여 사용자를 그룹에 할당하는 하나 이상의 iam  정책을 정의한다.

1. 애플리케이션 할당

어떤 사용자/그룹이 어떤 애플리케이션에 액세스할 수 있는 지 정의할 수 있다.

필요한 url, 인증서, 메타데이터가 제공된다.

→ 이를 가능하게 하는 것을 속성 기반 액세스 제어(abac)라고 한다.

⇒ iam 자격 증명 센터 스토어에 저장된 사용자 속성을 기반으로 세분화된 권한을 갖는 것이다.

---

## aws directory

microsoft ad는 ad 도메인 서비스를 사용하는 모든 windows 서버에 사용되는 소프트웨어이다.

객체의 데이터베이스이며 사용자 계정, 컴퓨터 프린터, 파일 공유, 보안 그룹이 객체가 될 수 있다.

중앙 집중식 보안 관리로 계정 생성, 권한 할당 등의 작업이 가능하다.

모든 객체는 트리로 구성되며 트리의 그룹을 포리스트(forest)라고 한다.

### 이제 aws directory service

1. aws 관리형 microsoft ad

   → aws에 자체 액티브 디렉터리를 생성한다.

   → 로컬에서 관리할 수 있다.

   → 멀티팩터 인증을 지원한다.

   → 독립 실행형 active directory로 사용자가 있는 온프레미스 ad와 신뢰 관계를 구축할 수 있다.

   ⇒ 온프레미스와 aws active directory 간에 사용자가 공유되는 셈이다.

2. ad connector

   → directory gateway (proxy)로 온프레미스 ad에 리다이렉트한다.

   → mfa를 지원한다.

   → 사용자는 온프레미스 ad에서만 관리된다.

3. simple ad

   → aws의 ad 호환 관리형 디렉터리이다.

   → microsoft 디렉터리를 사용하지 않으며 온프레미스 ad와도 결합되지 않는다.


### iam identity center-  ad 통합 방법

- directory 서비스를 통해 aws 관리형 ad를 연결할 경우
    - iam identity center를 aws 관리형 microsoft ad에 통합하고 연결하도록 설정하면 된다.
- 온프레미스에 자체 관리형 디렉터리가 있는 경우
    - 방법1: aws 관리형 microsoft ad를 사용해 양방향 신뢰 관계 구축하기
    - 방법2: ad 커넥터를 활용하기


---

### aws control tower 서비스

모범 사례를 기반으로 안전하고 규정을 준수하는 다중 계정 aws 환경을 손쉽게 설정하고 관리할 수 있다.

다중 계정을 생성하기 위해 control tower service는 aws organization 서비스를 사용해 계정을 자동 생성한다.

- 장점

  : 클릭 몇 번으로 환경을 자동으로 설정할 수 있다.

  : 가드레일을 사용해 자동으로 지속적인 정책 관리를 할 수 있다.

  : 정책 위반을 감지하고 자동으로 규정할 수 있다.

  : 대화형 대시보드를 통해 모든 계정의 전반적인 규정 준수를 모니터링한다.

### 여기서 가드레일이란?

컨트롤 타워 환경 내의 모든 계정에 대한 거버넌스를 얻을 수 있디.

1. 예방 가드레일

   : 계정을 무언가로부터 보호하는 것 → 제한적이다.

→ SCP를 사용해 모든 계정에 적용한다.

1. 탐지 가드레일

   : 규정을 준수하지 않는 것을 탐지한다.

→ aws config 서비스 사용