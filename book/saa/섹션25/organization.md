## aws organization

글로벌 서비스로 다수의 aws 계정을 동시에 관리할 수 있게 해준다.

메인 계정이 관리 계정이 된다. / 다른 계정은 멤버 계정이 된다.

멤버 계정은 한 조직에만 소속된다.

모든 계정의 비용을 통합 결제할 수 있다.

조직 내 모든 계정에 대해 집계된 사용량에 기반한 비용 할인을 받을 수 있다.

계정 간에 예약 인스턴스와 saving plans 할인이 공유된다.

organization 내 계정 생성을 자동화할 수 있는 api가 있어 이를 통해 계정을 쉽게 생성할 수 있다.

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/0e50c9f9-d6b9-4369-b0d8-a40d14ac1451/510820f3-e10d-4e00-95d2-c56d4e9ccb54/Untitled.png)

루트 조직 단위라는 개념이 있다.

자유롭게 조직 단위를 구성할 수 있다.

- 장점
1. 다수의 계정을 가져 다수의 vpc를 가진 단일 계정에 비해 보안이 뛰어나다.
2. 청구 목적의 태그 기준을 적용할 수 있다.
3. 한번에 모든 계정에 대해 cloudtrail을 활성화하여 모든 로그를 중앙 s3로 보낼 수 있다.
4. cloudwatch logs를 중앙 로깅 계정으로 전송할 수 있다.
5. 자동으로 관리 목적의 계정 간 역할을 수립할 수 있다.
6. **보안 측면에서 서비스 제어 정책(SCP)를 정의할 수 있다.**

   특정 ou / 계정에 적용되는 iam 정책으로 해당 사용자와 역할 모두가 계정 내에서 할 수 있는 일을 제한한다.

   SCP는 모든 대상에 적용되나 영구적인 관리자 권한을 갖는 관리 계정에는 적용되지 않습니다.

   기본적으로 아무것도 허용하지 않는다. → 구체적인 허용 항목을 설정해야 한다.


![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/0e50c9f9-d6b9-4369-b0d8-a40d14ac1451/589e03e7-f2a5-4b80-85cc-7e5c221a7df7/Untitled.png)

### SCP의 두 전략 - 차단 목록, 허용 목록

차단 목록: 계정이 사용하지 못하게 할 서비스를 지정한다.

맨 처음에 allow로 모든 서비스를 하고 그 다음에 deny를 추가해서 차단 목록을 만든다.

허용 목록: 다 허용하지는 않고 예를 들어 ec2, cloudwatch만 허용하는 방식이다.